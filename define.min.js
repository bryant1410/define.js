/*! DefineJS v0.2.4 2015-02-20 */
!function(a,b){function c(a){var b=typeof a;return"function"===b||a&&"object"===b||!1}function d(a){return a&&"object"==typeof a||!1}function e(a){return"number"==typeof a&&a>-1&&a%1===0&&r>=a}function f(a,b){var d;if(c(a)&&c(b))for(d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);return a}function g(a,b){return"string"==typeof a?g[a]=b:c(a)&&f(g,a),g}function h(a,b,c,d){function e(b){p.modules[a]=b?b:f,c.install(a,"success")}var f=g.execute(b,d);g.isPromiseAlike(f)?f.then(e):setTimeout(e,0)}function i(){var a=v.currentScript,b=/^(.*[\\\/])/;i.head=v.head||v.getElementsByTagName("head")[0],i.baseElement=v.getElementsByTagName("base")[0],i.baseElement&&(i.head=i.baseElement.parentNode),a?(i.baseUrl=a.getAttribute("base")||a.src.match(b)[1],i.baseGlobal=a.getAttribute("global")):i.baseUrl=""}function j(a){return function b(c){var d=c.currentTarget||c.srcElement;("load"===c.type||C.test(d.readyState))&&"function"==typeof a&&a("success"),d.detachEvent&&!B?d.detachEvent("onreadystatechange",b):d.removeEventListener("load",b,!1)}}function k(a){return function b(c){var d=c.currentTarget||c.srcElement;("load"===c.type||C.test(d.readyState))&&"function"==typeof a&&a("error"),"function"==typeof d.removeEventListener&&d.removeEventListener("error",b,!1)}}function l(){function a(a,c,d){return"function"==typeof a?(d=a,a=b,c=q):g.isArray(a)?(d=c,c=a,a=b):"string"==typeof a&&"function"==typeof c&&(d=c,c=q),"function"!=typeof d?void console.error("Invalid input parameter to define a module"):(a===b&&(a=g.getFileName(document.currentScript.src)),p.definedModules[a]=!0,void(g.isArray(c)&&c.length?D.loadAll(c,function(){for(var b=[],e=0,f=c.length;f>e;e+=1)b.push(p.modules[g.getFileName(c[e])]);D.setup(a,d,b)}):D.setup(a,d)))}function c(a,b){return"function"!=typeof b?void console.error("Invalid input parameter to require a module"):void(g.isArray(a)&&a.length?D.loadAll(a,function(){for(var c=[],d=0,e=a.length;e>d;d+=1)c.push(p.modules[g.getFileName(a[d])]);g.execute(b,c)}):g.execute(b))}function d(a){return new Promise(function(b){c(a,b),console.log("Great to see that you are using this function on DefineJS (https://www.npmjs.org/package/definejs)\n","This function provides a way of requiring your defined modules using a Promise based coding style.\n","Actually as you might have noticed we are actively extending this module loader, and that's why we need your feedback on this.\n","You could join the chat room on Gitter (https://gitter.im/fixjs/define.js) and provide us with your great ideas and feedbacks.")})}function e(a){if(g.isObject(a)){var b;for(b in a)a.hasOwnProperty(b)&&(p.options[b]=a[b])}}function f(b){g.isObject(b)||(b=o),b.require=c,b.define=a,b.config=e,b.use=d}return c.config=e,a.amd={},a.info=p,f}var m,n,o=a(),p={options:{paths:null},modules:{},installed:{},waitingList:{},failedList:{},definedModules:{}},q=[],r=Math.pow(2,53)-1,s="[object Array]",t="[object Function]",u=Object.prototype.toString;m=Array.isArray||function(a){return d(a)&&e(a.length)&&u.call(a)===s||!1},n=function(a){return"function"==typeof a||!1},(n(/x/)||Uint8Array&&!n(Uint8Array))&&(n=function(a){return u.call(a)===t}),g({extend:f,isArray:m,isFunction:n,isObject:c,isObjectLike:d,isPromiseAlike:function(a){return a&&n(a.then)||!1}}),g.execute=function(a,c){var d;g.isArray(c)||(c=q);try{d=a.apply(b,c)}catch(e){}return d};var v=o.document;i();var w={},x=/[\?|#]([^]*)$/,y=/\/([^/]*)$/,z=/.*?(?=\.|$)/;g.matchUrl=function(a){var b,c;return a=a.replace(x,""),b=(c=a.match(y))?c[1]:a,b=b.match(z)[0]},g.getFileName=function(a){return w[a]||(w[a]=g.matchUrl(a))};var A={};g.getUrl=function(a){var b=g.getFileName(a);return A[b]||(A[b]=g.makeUrl(a))},g.makeUrl=function(a){var b,c,d,e;if(c="string"==typeof p.options.urlArgs?"?"+p.options.urlArgs:"function"==typeof p.options.urlArgs?"?"+p.options.urlArgs():"",b=p.options.baseUrl?p.options.baseUrl:i.baseUrl,g.isObject(p.options.paths))for(d in p.options.paths)if(p.options.paths.hasOwnProperty(d)&&(e=p.options.paths[d],"string"==typeof e&&0===a.indexOf(d+"/"))){a=a.replace(d,e);break}return b&&"/"!==b.charAt(b.length-1)&&"/"!==a.charAt(0)&&(b+="/"),b+=a+".js"+c};var B="undefined"!=typeof o.opera&&"[object Opera]"===o.opera.toString(),C=/^(complete|loaded)$/;g.createScript=function(a,b,c){var d;return d=p.options.xhtml?v.createElementNS("http://www.w3.org/1999/xhtml","script"):v.createElement("script"),d.async=!0,d.type=p.options.scriptType||"text/javascript",d.charset="utf-8",a=g.getUrl(a),d.attachEvent&&!B?d.attachEvent("onreadystatechange",j(b)):(d.addEventListener("load",j(b),!1),d.addEventListener("error",k(c),!1)),i.baseElement?i.head.insertBefore(d,i.baseElement):i.head.appendChild(d),d.src=a,d},g.getScript=function(a,b){return g.createScript(a,b,b)};var D={install:function(a,b){var c,d,e,f;if("success"===b?p.installed[a]||(p.installed[a]=!0):p.failedList[a]=!0,c=p.waitingList[a],g.isArray(c)){for(e=0,f=c.length;f>e;e+=1){d=c[e];try{d(b)}catch(h){}}c.length=0}},load:function(a,b){var c,d,e=!1,f=g.getFileName(a);if(p.installed[f])b(p.modules[f]);else if(g.isArray(p.waitingList[f])||(p.waitingList[f]=[],e=!0),p.waitingList[f].push(b),e){if(g.isObject(p.options.dependencyMap))for(c in p.options.dependencyMap)if(p.options.dependencyMap.hasOwnProperty(c)&&(d=p.options.dependencyMap[c],d.indexOf(a)>-1)){a=c;break}g.getScript(a,function(a){p.definedModules[f]===!0||D.install(f,a)})}},loadAll:function(a,b){function c(a){f.push(a),f.length===e&&"function"==typeof b&&b(f)}for(var d=0,e=a.length,f=[];e>d;d+=1)D.load(a[d],c)},setup:function(a,b,c){h(a,b,this,c)}};if("object"==typeof exports)module.exports=l();else if("function"==typeof define&&define.amd)define([],l);else{var E=l();i.baseGlobal&&g.isObject(o[i.baseGlobal])?E(o[i.baseGlobal]):o.definejs=E}}(function(){return this});