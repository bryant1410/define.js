<!DOCTYPE html><html><head>  <title>DefineJS: Modules promise format</title>  <style>  body {    font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;  }  </style>  <link href="vendor/prism/prism.css" rel="stylesheet" />  <!--Temporary prmise polyfill for browsers that don't support it-->  <script src="https://www.promisejs.org/polyfills/promise-6.0.0.min.js"></script></head><body>  <h1>Note:</h1>  <p><strong>This very page loads an advanced DefineJS Promised Module example.  Check out the console to see the logs and the loading process of promised modules.</strong>    <p>      <h1>Promised Modules</h1>      <p>Using the same AMD module style you can have privileged promise based modules.        <br/>All you need to do is just returning a promise in your modules, to make them promised modules.        <br/>To see how it works, just check out the        <q>simple-promised-module</q> example in the examples folder.      </p>      <p>        In this example we have a promised module named: <strong>promisedModule.js</strong>        <br />which is responsible to wait for a specific global variable, and serves it as the module's promised value.</p>      <pre><code class="language-javascript">//promisedModule.jsdefine([/*'dependency'*/],  function(/*dependency*/){    return new Promise(function (fulfill, reject) {      //Here you expect to have a global variable named: myApp after 2 seconds      //otherwise your module definition gets rejected      setTimeout(function(){        if(window.myApp !== undefined){          //fulfill when succeeded and pass the fulfillment value          fulfill({            app: window.myApp,            log: 'This is just a sample promised object to serve as a promised module!'          });        } else {          //reject in case of error or unsuccessful operations          reject(new Error('No global myApp object found!!'));        }      }, 2000);    });  });</code></pre>      <p>        Now you could easily require it, or add it as a dependency. What will happen is, it waits for your promise to get resolved then you will have the promised module object.      </p>      <pre><code class="language-javascript">//main.jsrequire(['promisedModule'],  function(promisedModule){    console.log(promisedModule.log);//=>This is just a sample promised object!    console.log(promisedModule.app);  });  </code></pre>  <p>        <strong>Note:</strong>we are still discussing about the proper way of handling the rejected state of a promised module. Any feedback or proposal is really appreciated.      </p>            <h1>use() vs require()</h1>      <p>You can also have the same modules flow using a new offered syntax by DefineJS:</p>      <br />      <pre><code class="language-javascript">use(['dependency1', 'dependency2'])  .then(function(dependency1, dependency2){    //...    return dependency1.util;  })  .then(function(util){    //...    //use util object if it has any useful functionality    return util.map([/*...*/]);  })  .catch(function(e){    //in case of having a rejected promised module or any async error    console.error(e);  });</code></pre>      <p><a href="use-example.html">Check out the actual working example!</a>      </p>      <hr />      <p>If you are interested in helping us to extend the DefineJS, we appreciate any kind of help. What w are lacking these days is a real feedback from the real world.      </p>      <script global="window" src="define.js"></script>      <script src="main.js"></script>      <script src="vendor/prism/prism.js"></script></body></html>